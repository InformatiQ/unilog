<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>unilog.config documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Unilog 0.7.4 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unilog</span></div></div></li><li class="depth-2 current"><a href="unilog.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="unilog.config.html#var-appender-config"><div class="inner"><span>appender-config</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-build-appender"><div class="inner"><span>build-appender</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-build-encoder"><div class="inner"><span>build-encoder</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-default-encoder"><div class="inner"><span>default-encoder</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-default-pattern"><div class="inner"><span>default-pattern</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-levels"><div class="inner"><span>levels</span></div></a></li><li class="depth-1"><a href="unilog.config.html#var-start-logging.21"><div class="inner"><span>start-logging!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">unilog.config</h2><div class="doc"><div class="markdown"><p>Small veneer on top of logback. Originally based on the logging initialization in riemann. Now diverged quite a bit.</p><p>For configuration, a single public function is exposed: <code>start-logging!</code> which takes care of configuring logback, later logging is done through standard facilities, such as <a href="https://github.com/clojure/tools.logging">clojure.tools.logging</a>.</p><p>Two extension mechanism are provided to add support for more appenders and encoders, see <code>build-appender</code> and <code>build-encoder</code> respectively</p></div></div><div class="public anchor" id="var-appender-config"><h3>appender-config</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Called by walking through each key/val pair in the main configuration map. This allows for early transformation of quick access keys such as: <code>:console</code>, <code>:file</code>, and <code>:files</code></p></div></div></div><div class="public anchor" id="var-build-appender"><h3>build-appender</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a prepared configuration map, associate a prepared appender to the <code>:appender</code> key.</p></div></div></div><div class="public anchor" id="var-build-encoder"><h3>build-encoder</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a prepared configuration map, associate a prepared encoder to the <code>:encoder</code> key.</p></div></div></div><div class="public anchor" id="var-default-encoder"><h3>default-encoder</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Default encoder and pattern configuration</p></div></div></div><div class="public anchor" id="var-default-pattern"><h3>default-pattern</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Default pattern for PatternLayoutEncoder</p></div></div></div><div class="public anchor" id="var-levels"><h3>levels</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Logging level names to log4j level association</p></div></div></div><div class="public anchor" id="var-start-logging.21"><h3>start-logging!</h3><div class="usage"><code>(start-logging! {:keys [external level overrides], :as config})</code><code>(start-logging!)</code></div><div class="doc"><div class="markdown"><p>Initialize log4j logging from a map.</p><p>The map accepts the following keys as keywords:</p>
<ul>
  <li><code>:level</code>: Default level at which to log.</li>
  <li><code>:pattern</code>: The pattern to use for logging text messages</li>
  <li><code>:console</code>: Append messages to the console using a simple pattern  layout. If value is a boolean, treat it as such and use a default  encoder. If value is a string, treat it as a pattern and use  a pattern encoder. If value is a map, expect encoder configuration  in the map.</li>
  <li><code>:file</code>: A file to log to. May either be a string, the log file, or  a map which accepts optional encoder configuration.</li>
  <li><code>:files</code>: A list of either strings or maps. strings will create  text files, maps are expected to contain a <code>:path</code> key as well  as an optional <code>:json</code> which when present and true will switch  the layout to a JSONEventLayout for the logger.</li>
  <li><code>:overrides</code>: A map of namespace or class-name to log level,  this will supersede the global level.</li>
  <li><code>:external</code>: Do not proceed with configuration, this  is useful when logging configuration is provided  in a different manner (by supplying your own logback config file  for instance).</li>
</ul><p>When called with no arguments, assume an empty map</p><p>example:</p>
<pre><code class="clojure">{:console   true
 :level     &quot;info&quot;
 :files     [&quot;/var/log/app.log&quot;
             {:file &quot;/var/log/app-json.log&quot;
              :encoder json}]
 :overrides {&quot;some.namespace&quot; &quot;debug&quot;}}
</code></pre></div></div></div></div></body></html>